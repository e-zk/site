<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width,initial-scale=1" name="viewport">
<meta content="#101010" name="theme-color"/>
<link href="/favicon.svg" rel="icon" sizes="any" type="image/svg+xml">
<link href="/favicon.ico" rel="alternate icon">
<link href="/static/css/main.css" rel="stylesheet">
<meta http-equiv="onion-location" content="http://64wv2uqwjacqer7z5d6ooqgrvjwlioizmo7hgmxm7zxerbvgnoqhafid.onion/posts/winsandbox.html">
<title>Windows Sandbox</title>
<meta property="og:title" content="Windows Sandbox">
<meta property="og:description" content="Using Windows Sandbox for program isolation and compartmentalisation">
</head>
<body>
<header>
<nav>
<a href="/">zakaria.org</a><a href="/posts/">posts</a><a href="/projects.html">code</a><a class="right" href="/about.html">about</a></nav>
</header>
<main>
<h1 id="Windows%20Sandbox">Windows Sandbox</h1>

<p>If you[&#8216;re forced to] use Windows this might be useful for compartmentalisation.  </p>

<p>Windows Sandbox is a Windows 10 Pro feature that enables the use of temporary Virtual Machines. These can be used as ephemeral sandboxes for applications.</p>

<h2 id="Enabling">Enabling</h2>

<p>Windows Sandbox isn&#8217;t enabled by default. To enable it follow these steps:</p>

<ol>
<li>Open &#8220;Control Panel&#8221; and click the upside down caret next to the back&#47;forward buttons</li>
<li>Click &#8220;All Control Panel Items&#8221;</li>
<li>Navigate to &#8220;Programs and Features&#8221;</li>
<li>On the left click &#8220;Turn Windows features on or off&#8221;</li>
<li>Scroll down and tick the box next to &#8220;Windows Sandbox&#8221; if it isn&#8217;t already ticked</li>
</ol>

<p>From the start menu search for &#8220;Windows Sandbox&#8221;. Hit enter and a fresh Sandbox window will appear.</p>

<h2 id="Configuring">Configuring</h2>

<p>Once the sandbox window is closed all data is erased. Next time you open Windows Sandbox a fresh new VM is created.<br/>
This can make it annoying if you wish to sandbox a single program, but have to install it every time you start a new sandbox.</p>

<p>To make it easier for these cases you can pre-configure sandbox instances via <code>.wsb</code> files. With this file you can configure memory, networking, audio&#47;video passthrough, among other things. See the Microsoft official documentation for Windows Sandbox configuration<sup id="fnref1"><a href="#fn1" rel="footnote">1</a></sup>. It also supports running a script at startup, and mapping network devices and local shares.</p>

<p>I highly suggest reading through the documentation for the <code>.wsb</code> file format. There are some good examples and interesting features.</p>

<h3 id="Example:%20Zoom">Example: Zoom</h3>

<p>Zoom is a very popular group call&#47;video conference software (I won&#8217;t bore you with the details I&#8217;m sure you have <em>some</em> idea what Zoom is by now). However, Zoom has had numerous security and privacy issues. If you&#8217;re paranoid like me you may feel uneasy just seeing it&#8217;s icon in the start menu - knowing you have it installed on the same machine along with all your other precious digital data. I digress, here is a configuration file for my Zoom sandbox:</p>

<pre><code class="language-xml">&#60;Configuration&#62;
    &#60;MappedFolders&#62;
        &#60;MappedFolder&#62;
            &#60;HostFolder&#62;C:\Sandbox\Installers&#60;&#47;HostFolder&#62;
            &#60;SandboxFolder&#62;C:\Installers&#60;&#47;SandboxFolder&#62;
            &#60;ReadOnly&#62;true&#60;&#47;ReadOnly&#62;
        &#60;&#47;MappedFolder&#62;
    &#60;&#47;MappedFolders&#62;
    &#60;AudioInput&#62;Enable&#60;&#47;AudioInput&#62;
    &#60;VideoInput&#62;Enable&#60;&#47;VideoInput&#62;
    &#60;VGpu&#62;Enable&#60;&#47;VGpu&#62;
    &#60;MemoryInMB&#62;12288&#60;&#47;MemoryInMB&#62;
    &#60;LogonCommand&#62;
        &#60;Command&#62;C:\Installers\ZoomInstaller.exe&#60;&#47;Command&#62;
    &#60;&#47;LogonCommand&#62;
&#60;&#47;Configuration&#62;
</code></pre>

<p>It maps the local <code>C:\Sandbox\Installers</code> directory (where I store <code>ZoomInstaller.exe</code>) to <code>C:\Installers</code> in the VM itself. Enables audio (mic) and video (webcam) passthrough. I allocate 12Gb to the VM - should be more than enough on my laptop with 16Gb of RAM. It then runs the Zoom installer on startup.</p>

<p>The verdict? It works fairly well. Recently however webcam passthrough has stopped working, possibly due to a driver issue. (Installing drivers requires the machine to reboot - but you can&#8217;t reboot a sandbox without deleting everything).</p>

<p>I make use of a couple of these <code>.wsb</code> files for different programs I&#8217;d rather install on an ephemeral virtual machine than my main OS.</p>

<div class="footnotes">
<hr/>
<ol>

<li id="fn1">
<p><a href="https://docs.microsoft.com/en-us/windows/security/threat-protection/windows-sandbox/windows-sandbox-configure-using-wsb-file">https:&#47;&#47;docs.microsoft.com&#47;en-us&#47;windows&#47;security&#47;threat-protection&#47;windows-sandbox&#47;windows-sandbox-configure-using-wsb-file</a>&#160;<a href="#fnref1" rev="footnote">&#8617;</a></p>
</li>

</ol>
</div>
</main>
<footer>
<br><hr>
<p>posted: [&nbsp;2021-08-08&nbsp;]</p>
<p>view: [&nbsp;<a href="/posts/winsandbox.md">plaintext</a>&nbsp;|&nbsp;<a href="http://64wv2uqwjacqer7z5d6ooqgrvjwlioizmo7hgmxm7zxerbvgnoqhafid.onion/posts/winsandbox.html">hidden service</a>&nbsp;]</p>
<div class="qrbox">
<details class="qr"><summary>show qr: [ clear net ]</summary> <svg width="3.92cm" height="3.92cm" viewBox="0 0 37 37" preserveAspectRatio="none" version="1.1" xmlns="http://www.w3.org/2000/svg">
	<g id="QRcode">
		<rect x="0" y="0" width="37" height="37" fill="#ffffff"/>
		<path style="stroke:#000000" transform="translate(4,4.5)" d="M0,0h7M9,0h3M14,0h1M16,0h2M22,0h7M0,1h1M6,1h1M11,1h4M17,1h2M20,1h1M22,1h1M28,1h1M0,2h1M2,2h3M6,2h1M9,2h3M15,2h1M19,2h2M22,2h1M24,2h3M28,2h1M0,3h1M2,3h3M6,3h1M8,3h1M10,3h2M13,3h1M15,3h1M17,3h1M19,3h2M22,3h1M24,3h3M28,3h1M0,4h1M2,4h3M6,4h1M8,4h1M10,4h1M12,4h2M16,4h1M19,4h2M22,4h1M24,4h3M28,4h1M0,5h1M6,5h1M9,5h2M16,5h1M22,5h1M28,5h1M0,6h7M8,6h1M10,6h1M12,6h1M14,6h1M16,6h1M18,6h1M20,6h1M22,6h7M9,7h1M12,7h1M15,7h2M18,7h1M0,8h2M5,8h3M9,8h2M12,8h3M17,8h1M20,8h1M24,8h2M2,9h3M7,9h1M10,9h1M15,9h1M19,9h1M21,9h1M23,9h2M26,9h2M2,10h2M6,10h4M11,10h2M14,10h2M17,10h2M20,10h2M23,10h2M0,11h3M5,11h1M7,11h1M10,11h2M15,11h1M19,11h2M22,11h1M24,11h2M3,12h1M5,12h3M9,12h2M15,12h2M18,12h1M20,12h1M22,12h2M28,12h1M1,13h1M3,13h2M9,13h2M12,13h2M15,13h5M22,13h3M27,13h2M0,14h4M5,14h4M14,14h2M17,14h1M20,14h4M25,14h2M0,15h4M7,15h1M9,15h2M12,15h1M19,15h1M21,15h2M26,15h1M28,15h1M1,16h3M5,16h4M12,16h4M17,16h1M25,16h2M0,17h1M7,17h1M9,17h2M13,17h1M15,17h2M19,17h2M22,17h3M26,17h3M0,18h2M6,18h1M12,18h2M15,18h2M19,18h4M24,18h2M28,18h1M0,19h1M2,19h1M4,19h2M7,19h3M11,19h1M15,19h2M19,19h1M21,19h1M24,19h1M0,20h1M3,20h2M6,20h6M17,20h1M20,20h5M26,20h3M8,21h2M12,21h4M17,21h4M24,21h2M0,22h7M8,22h3M13,22h4M18,22h3M22,22h1M24,22h3M0,23h1M6,23h1M8,23h2M12,23h2M19,23h2M24,23h1M27,23h1M0,24h1M2,24h3M6,24h1M9,24h1M11,24h3M15,24h2M19,24h7M27,24h1M0,25h1M2,25h3M6,25h1M15,25h6M25,25h2M28,25h1M0,26h1M2,26h3M6,26h1M9,26h4M15,26h3M19,26h9M0,27h1M6,27h1M8,27h4M15,27h2M18,27h1M21,27h1M25,27h2M28,27h1M0,28h7M8,28h1M11,28h1M15,28h3M19,28h1M21,28h2M25,28h2"/>
	</g>
</svg> </details>
<details class="qr"><summary>show qr: [ onion url ]</summary> <!-- Created with qrencode 4.1.1 (https://fukuchi.org/works/qrencode/index.html) -->
<svg width="4.76cm" height="4.76cm" viewBox="0 0 45 45" preserveAspectRatio="none" version="1.1" xmlns="http://www.w3.org/2000/svg">
	<g id="QRcode">
		<rect x="0" y="0" width="45" height="45" fill="#ffffff"/>
		<path style="stroke:#000000" transform="translate(4,4.5)" d="M0,0h7M9,0h1M13,0h1M17,0h5M23,0h1M25,0h1M28,0h1M30,0h7M0,1h1M6,1h1M8,1h2M11,1h5M17,1h1M20,1h3M24,1h2M27,1h1M30,1h1M36,1h1M0,2h1M2,2h3M6,2h1M9,2h3M15,2h1M18,2h5M24,2h1M28,2h1M30,2h1M32,2h3M36,2h1M0,3h1M2,3h3M6,3h1M8,3h2M11,3h1M13,3h2M16,3h4M22,3h2M25,3h4M30,3h1M32,3h3M36,3h1M0,4h1M2,4h3M6,4h1M10,4h1M12,4h2M16,4h8M26,4h1M28,4h1M30,4h1M32,4h3M36,4h1M0,5h1M6,5h1M8,5h1M10,5h1M15,5h3M20,5h1M24,5h4M30,5h1M36,5h1M0,6h7M8,6h1M10,6h1M12,6h1M14,6h1M16,6h1M18,6h1M20,6h1M22,6h1M24,6h1M26,6h1M28,6h1M30,6h7M12,7h1M16,7h1M21,7h1M23,7h2M26,7h1M0,8h5M6,8h5M12,8h3M17,8h1M19,8h1M22,8h2M25,8h5M31,8h1M33,8h1M35,8h1M4,9h2M7,9h3M14,9h1M16,9h1M19,9h3M23,9h1M25,9h1M28,9h2M31,9h1M34,9h1M0,10h1M3,10h5M9,10h1M11,10h2M14,10h2M18,10h1M26,10h3M30,10h3M34,10h1M36,10h1M0,11h2M3,11h3M7,11h5M18,11h4M23,11h1M28,11h3M33,11h1M0,12h1M2,12h6M9,12h1M11,12h1M13,12h3M17,12h1M19,12h1M22,12h1M25,12h3M29,12h2M32,12h3M0,13h4M5,13h1M8,13h2M12,13h2M16,13h10M28,13h1M31,13h1M34,13h2M0,14h3M4,14h1M6,14h1M8,14h3M14,14h2M17,14h1M20,14h1M22,14h1M27,14h5M34,14h1M36,14h1M0,15h1M3,15h3M7,15h1M9,15h1M12,15h1M14,15h3M19,15h3M26,15h2M29,15h2M33,15h1M36,15h1M2,16h1M6,16h3M10,16h1M12,16h4M17,16h1M19,16h1M22,16h9M32,16h1M34,16h1M36,16h1M0,17h1M7,17h3M13,17h1M16,17h1M19,17h3M23,17h1M25,17h1M28,17h2M31,17h1M35,17h1M1,18h1M3,18h2M6,18h2M10,18h3M14,18h2M17,18h2M22,18h1M24,18h5M30,18h1M32,18h5M0,19h6M8,19h2M11,19h1M16,19h1M19,19h4M24,19h1M26,19h1M28,19h1M32,19h2M36,19h1M0,20h3M5,20h2M10,20h2M17,20h1M19,20h1M22,20h2M25,20h2M30,20h1M32,20h1M34,20h3M1,21h2M4,21h1M8,21h1M10,21h1M12,21h2M16,21h1M19,21h1M23,21h1M25,21h1M28,21h2M31,21h1M35,21h1M1,22h4M6,22h1M10,22h1M13,22h4M22,22h1M27,22h7M35,22h2M1,23h2M5,23h1M8,23h1M12,23h2M15,23h1M18,23h1M20,23h2M26,23h1M28,23h2M31,23h1M36,23h1M0,24h1M2,24h2M6,24h1M12,24h1M14,24h2M17,24h1M22,24h5M29,24h4M34,24h3M0,25h4M5,25h1M10,25h1M16,25h1M19,25h2M23,25h1M25,25h2M28,25h2M31,25h1M35,25h1M0,26h1M2,26h1M6,26h1M8,26h1M10,26h3M15,26h4M20,26h1M22,26h1M25,26h1M27,26h1M31,26h1M34,26h3M0,27h1M2,27h2M10,27h2M14,27h1M21,27h3M28,27h1M36,27h1M0,28h1M2,28h5M8,28h4M15,28h5M22,28h1M24,28h9M34,28h1M8,29h1M12,29h3M16,29h8M25,29h1M28,29h1M32,29h1M0,30h7M8,30h1M13,30h3M17,30h1M21,30h1M24,30h1M26,30h1M28,30h1M30,30h1M32,30h5M0,31h1M6,31h1M12,31h2M16,31h1M19,31h4M24,31h1M26,31h3M32,31h2M35,31h1M0,32h1M2,32h3M6,32h1M8,32h1M12,32h1M14,32h1M17,32h1M22,32h11M34,32h1M0,33h1M2,33h3M6,33h1M8,33h1M10,33h1M16,33h1M19,33h2M23,33h1M25,33h1M27,33h1M30,33h4M35,33h2M0,34h1M2,34h3M6,34h1M8,34h5M15,34h3M20,34h2M25,34h2M29,34h1M31,34h1M33,34h4M0,35h1M6,35h1M8,35h2M11,35h1M14,35h2M21,35h1M23,35h1M26,35h6M36,35h1M0,36h7M8,36h1M10,36h2M17,36h1M22,36h1M25,36h1M29,36h3M34,36h3"/>
	</g>
</svg> </details>
</div>
(C) <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>
</footer>
</body>
</html>
