<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="width=device-width,initial-scale=1" name="viewport">
<meta content="#101010" name="theme-color"/>
<link href="/favicon.svg" rel="icon" sizes="any" type="image/svg+xml">
<link href="/favicon.ico" rel="alternate icon">
<link href="/static/css/main.css" rel="stylesheet">
<meta http-equiv="onion-location" content="http://64wv2uqwjacqer7z5d6ooqgrvjwlioizmo7hgmxm7zxerbvgnoqhafid.onion/posts/2020-12-05-fonts.html">
<title>How I (almost) fixed my fonts</title>
<meta property="og:title" content="How I (almost) fixed my fonts">
</head>
<body>
<header>
<nav>
<a href="/">zakaria.org</a><a href="/posts/">posts</a><a href="/projects.html">code</a><a style="float:right" href="/about.html">about</a></nav>
</header>
<main>
<h1 id="How%20I%20(almost)%20fixed%20my%20fonts">How I (almost) fixed my fonts</h1>

<p>This site goes through CSS changes daily. Yes, daily. I can&#8217;t stop changing the CSS. It&#8217;s gotten to the point where I focus more on the CSS of this site than, evidently, writing posts for it. </p>

<p>I like web fonts. But I also like simplicity and straightforwardness. Sadly, getting webfonts and CSS to work together flawlessly is no simple task. </p>

<h2 id="Google%20Fonts">Google Fonts</h2>

<p>At first I just used Google Fonts: click, click, right click, copy, paste <code>@import</code> URL. Done. Fixed. &#8230;or so I thought.</p>

<p>Using Google fonts has the unfortunate side-effect that I now depend on a 3rd-party CDN for my site to look nice. That CDN is obviously Google - that&#8217;s not ideal for me.</p>

<h2 id="Self-hosting%20Google%20Fonts">Self-hosting Google Fonts</h2>

<p>So I decided to just host the fonts on this webserver. I came across this gem: <a href="https://github.com/majodev/google-webfonts-helper/">google-webfonts-helper</a>. You choose your Google fonts, it generates a zip file containing the font files, and some CSS to put on your page. Perfect! &#8230;or so I thought.</p>

<h2 id="Inline%20stylesheets">Inline stylesheets</h2>

<p>Wait. Now my fonts flash for a second. Oh, this is the fabled FOUT I&#8217;ve been hearing about. Google Fonts didn&#8217;t seem to have this issue, though I suppose their server is far more responsive than mine, and they do some CDN tricks or something. Here&#8217;s a CSS-Tricks article I read: <a href="https://css-tricks.com/how-to-load-fonts-in-a-way-that-fights-fout-and-makes-lighthouse-happy/">https:&#47;&#47;css-tricks.com&#47;how-to-load-fonts-in-a-way-that-fights-fout-and-makes-lighthouse-happy&#47;</a>. I don&#8217;t recall whether it helped me in this endeavour or not since the solution requires JavaScript (eugh).</p>

<p>I decided to just inline the stylesheet to fetch the fonts and apply them since it took the browser a bit extra to download <code>styles.css</code> and since the fonts would be loaded with the webpage it shouldn&#8217;t look to bad. I added <code>font-display: fallback</code> for some extra peace of mind. </p>

<pre><code class="language-css">@font-face {
    font-family: &#39;Charter Regular&#39;;
    font-style: normal;
    font-weight: normal;
    font-display: fallback;
    src: local(&#39;Charter Regular&#39;),          local(&#39;Charter-Regular&#39;),
         url(&#39;&#47;fonts&#47;charter_regular.woff&#39;) format(&#39;woff&#39;),     &#47;* Modern Browsers *&#47;
         url(&#39;&#47;fonts&#47;charter_regular.ttf&#39;)  format(&#39;truetype&#39;); &#47;* Safari, Android, iOS *&#47;
}

@font-face {
    font-family: &#39;Charter Regular&#39;;
    font-style: normal;
    font-weight: bold;
    font-display: fallback;
    src: local(&#39;Charter Bold&#39;),          local(&#39;Charter-Bold&#39;),
         url(&#39;&#47;fonts&#47;charter_bold.woff&#39;) format(&#39;woff&#39;),     &#47;* Modern Browsers *&#47;
         url(&#39;&#47;fonts&#47;charter_bold.ttf&#39;)  format(&#39;truetype&#39;); &#47;* Safari, Android, iOS *&#47;
}

html, body {
    font-family: "Charter Regular", "Times New Roman", serif;
}

</code></pre>

<p>This still didn&#8217;t give the desired result. There were still weird loading times and odd font flashes.</p>

<h2 id="The%20fix%20(sort%20of&amp;#8230;%20not%20really)">The fix (sort of&#8230; not really)</h2>

<p><em>I give up</em>.</p>

<pre><code class="language-css">html, body {
    font-family: sans-serif;
}
</code></pre>

<p>Chances are whenever you&#8217;re reading this the site has already been changed to reflect this change.<br/>
Sans-serif looks better for this site anyways :P  </p>
</main>
<footer>
<br><hr>
<p>posted: [&nbsp;2020-12-05&nbsp;]</p>
<p>view: [&nbsp;<a href="/posts/2020-12-05-fonts.md">plaintext</a>&nbsp;|&nbsp;<a href="http://64wv2uqwjacqer7z5d6ooqgrvjwlioizmo7hgmxm7zxerbvgnoqhafid.onion/posts/2020-12-05-fonts.html">hidden service</a>&nbsp;]</p>
<div class="qrbox">
<details class="qr"><summary>show qr: [ clear net ]</summary> <!-- Created with qrencode 4.1.1 (https://fukuchi.org/works/qrencode/index.html) -->
<svg width="3.92cm" height="3.92cm" viewBox="0 0 37 37" preserveAspectRatio="none" version="1.1" xmlns="http://www.w3.org/2000/svg">
	<g id="QRcode">
		<rect x="0" y="0" width="37" height="37" fill="#ffffff"/>
		<path style="stroke:#000000" transform="translate(4,4.5)" d="M0,0h7M8,0h4M14,0h2M17,0h1M22,0h7M0,1h1M6,1h1M11,1h3M16,1h4M22,1h1M28,1h1M0,2h1M2,2h3M6,2h1M9,2h1M11,2h1M15,2h2M20,2h1M22,2h1M24,2h3M28,2h1M0,3h1M2,3h3M6,3h1M10,3h2M16,3h2M19,3h2M22,3h1M24,3h3M28,3h1M0,4h1M2,4h3M6,4h1M10,4h6M17,4h1M19,4h1M22,4h1M24,4h3M28,4h1M0,5h1M6,5h1M9,5h1M11,5h1M14,5h4M22,5h1M28,5h1M0,6h7M8,6h1M10,6h1M12,6h1M14,6h1M16,6h1M18,6h1M20,6h1M22,6h7M8,7h2M12,7h1M16,7h1M18,7h3M0,8h2M3,8h2M6,8h1M9,8h1M12,8h1M14,8h2M17,8h1M19,8h2M22,8h1M28,8h1M2,9h1M5,9h1M7,9h2M10,9h1M13,9h2M16,9h1M19,9h1M21,9h1M23,9h2M26,9h2M0,10h1M2,10h1M4,10h3M9,10h1M12,10h1M15,10h1M18,10h1M21,10h1M24,10h1M26,10h1M1,11h4M13,11h5M19,11h2M23,11h3M28,11h1M0,12h2M3,12h1M5,12h2M8,12h3M12,12h2M15,12h1M18,12h1M20,12h1M22,12h2M28,12h1M1,13h3M5,13h1M7,13h1M9,13h2M12,13h1M14,13h1M16,13h1M18,13h1M20,13h1M22,13h7M0,14h4M6,14h2M9,14h1M12,14h1M14,14h2M18,14h4M23,14h1M26,14h1M28,14h1M3,15h1M7,15h3M12,15h5M18,15h2M21,15h2M26,15h1M28,15h1M0,16h4M5,16h2M8,16h2M11,16h2M14,16h3M20,16h1M23,16h1M25,16h1M0,17h6M9,17h1M11,17h3M15,17h1M17,17h4M24,17h1M26,17h2M0,18h2M3,18h5M9,18h2M19,18h4M24,18h2M28,18h1M0,19h3M5,19h1M7,19h2M10,19h1M13,19h5M20,19h2M24,19h3M0,20h3M6,20h1M9,20h4M14,20h2M18,20h10M8,21h1M10,21h3M14,21h1M16,21h1M19,21h2M24,21h2M0,22h7M15,22h1M17,22h4M22,22h1M24,22h2M0,23h1M6,23h1M9,23h1M11,23h1M13,23h2M17,23h1M19,23h2M24,23h1M27,23h2M0,24h1M2,24h3M6,24h1M8,24h1M10,24h1M12,24h2M15,24h11M27,24h1M0,25h1M2,25h3M6,25h1M8,25h2M12,25h1M14,25h2M18,25h1M27,25h1M0,26h1M2,26h3M6,26h1M11,26h4M16,26h1M18,26h1M20,26h2M23,26h2M26,26h3M0,27h1M6,27h1M8,27h1M10,27h2M16,27h1M18,27h1M21,27h1M25,27h2M28,27h1M0,28h7M8,28h1M10,28h1M12,28h1M14,28h2M17,28h1M19,28h5M25,28h1"/>
	</g>
</svg> </details>
<details class="qr"><summary>show qr: [ onion url ]</summary> <!-- Created with qrencode 4.1.1 (https://fukuchi.org/works/qrencode/index.html) -->
<svg width="4.76cm" height="4.76cm" viewBox="0 0 45 45" preserveAspectRatio="none" version="1.1" xmlns="http://www.w3.org/2000/svg">
	<g id="QRcode">
		<rect x="0" y="0" width="45" height="45" fill="#ffffff"/>
		<path style="stroke:#000000" transform="translate(4,4.5)" d="M0,0h7M8,0h4M14,0h2M18,0h1M21,0h2M26,0h1M30,0h7M0,1h1M6,1h1M11,1h3M16,1h2M19,1h1M22,1h1M24,1h1M26,1h1M30,1h1M36,1h1M0,2h1M2,2h3M6,2h1M9,2h1M11,2h1M15,2h2M18,2h1M20,2h2M24,2h2M30,2h1M32,2h3M36,2h1M0,3h1M2,3h3M6,3h1M10,3h2M16,3h6M23,3h1M25,3h1M30,3h1M32,3h3M36,3h1M0,4h1M2,4h3M6,4h1M10,4h6M18,4h2M21,4h2M28,4h1M30,4h1M32,4h3M36,4h1M0,5h1M6,5h1M9,5h1M11,5h1M14,5h3M20,5h7M28,5h1M30,5h1M36,5h1M0,6h7M8,6h1M10,6h1M12,6h1M14,6h1M16,6h1M18,6h1M20,6h1M22,6h1M24,6h1M26,6h1M28,6h1M30,6h7M8,7h2M12,7h1M16,7h1M19,7h2M23,7h3M27,7h1M0,8h2M3,8h2M6,8h1M9,8h1M12,8h1M14,8h2M17,8h1M23,8h1M26,8h2M30,8h1M36,8h1M0,9h3M5,9h1M10,9h1M13,9h2M16,9h1M19,9h1M22,9h2M25,9h3M29,9h1M31,9h3M1,10h1M6,10h2M10,10h1M12,10h1M15,10h1M17,10h2M20,10h1M23,10h1M27,10h5M34,10h3M1,11h1M4,11h1M8,11h1M13,11h8M22,11h1M27,11h1M30,11h1M34,11h2M0,12h2M4,12h6M13,12h1M15,12h1M20,12h1M23,12h1M27,12h2M30,12h2M33,12h1M35,12h1M0,13h1M4,13h2M7,13h1M12,13h1M14,13h1M16,13h3M22,13h3M26,13h3M32,13h4M2,14h2M5,14h3M9,14h1M14,14h2M17,14h1M19,14h2M25,14h1M27,14h1M29,14h2M36,14h1M0,15h2M8,15h1M12,15h5M19,15h1M22,15h1M28,15h3M32,15h1M34,15h1M36,15h1M0,16h2M6,16h1M9,16h1M11,16h2M14,16h3M19,16h2M22,16h1M24,16h2M27,16h2M30,16h1M34,16h3M2,17h3M8,17h4M13,17h1M15,17h1M17,17h1M19,17h2M22,17h1M25,17h1M27,17h1M31,17h1M33,17h2M0,18h1M2,18h1M6,18h2M12,18h1M18,18h3M23,18h2M27,18h1M29,18h3M33,18h1M36,18h1M3,19h2M10,19h2M13,19h4M22,19h1M24,19h2M27,19h2M31,19h1M36,19h1M0,20h3M4,20h3M8,20h2M11,20h1M14,20h2M17,20h1M23,20h1M26,20h1M28,20h1M30,20h3M35,20h2M0,21h2M4,21h1M7,21h3M12,21h1M14,21h1M16,21h1M19,21h5M25,21h3M29,21h1M31,21h5M0,22h3M4,22h1M6,22h6M15,22h1M17,22h1M20,22h1M22,22h2M26,22h3M30,22h2M33,22h1M36,22h1M3,23h2M8,23h7M17,23h2M20,23h1M22,23h2M26,23h2M31,23h1M33,23h4M1,24h1M4,24h5M10,24h4M15,24h2M19,24h2M24,24h1M28,24h1M30,24h1M36,24h1M0,25h3M7,25h3M14,25h2M21,25h1M23,25h1M27,25h3M32,25h2M35,25h1M0,26h2M4,26h3M8,26h2M11,26h4M16,26h5M27,26h2M35,26h2M0,27h1M5,27h1M7,27h1M10,27h2M16,27h1M20,27h1M23,27h1M26,27h2M32,27h3M36,27h1M0,28h1M4,28h1M6,28h1M10,28h1M12,28h1M14,28h2M18,28h3M22,28h4M27,28h6M34,28h2M8,29h1M11,29h3M17,29h4M25,29h1M27,29h2M32,29h4M0,30h7M9,30h1M11,30h2M15,30h11M28,30h1M30,30h1M32,30h2M36,30h1M0,31h1M6,31h1M12,31h1M14,31h1M18,31h1M22,31h1M24,31h2M28,31h1M32,31h1M35,31h1M0,32h1M2,32h3M6,32h1M8,32h1M10,32h1M12,32h2M15,32h3M19,32h1M23,32h2M26,32h7M0,33h1M2,33h3M6,33h1M8,33h3M12,33h3M16,33h1M18,33h2M21,33h3M25,33h2M28,33h1M30,33h2M34,33h1M36,33h1M0,34h1M2,34h3M6,34h1M10,34h1M15,34h2M21,34h1M23,34h1M25,34h1M31,34h4M36,34h1M0,35h1M6,35h1M8,35h4M13,35h2M16,35h1M22,35h1M26,35h1M30,35h2M33,35h4M0,36h7M8,36h1M12,36h1M14,36h2M17,36h4M23,36h1M26,36h1M28,36h1M30,36h1M32,36h1M36,36h1"/>
	</g>
</svg> </details>
</div>
(C) <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>
</footer>
</body>
</html>
